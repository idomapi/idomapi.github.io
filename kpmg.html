<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kpmg</title>
    <script src="https://www.govmap.gov.il/govmap/api/govmap.api.js" defer onload="initGovMap()"></script>
    <script type="text/javascript">
        const layers = {
            blueLineJlm: {
                id: '216600',
                layerNumber: 31020103,
                fieldName: 'value7'
            },
            eshkolSharon: {
                id: '216602',
                layerNumber: 5102010,
                fieldName: 'value2'
            }
        };
        const activeLayer = {
            id: layers.blueLineJlm.id,
            layerNumber: layers.blueLineJlm.layerNumber,
            fieldName: layers.blueLineJlm.fieldName
        };

        function initGovMap() {
                govmap.createMap('map', {
                    token: 'fe827829-8b7a-4ef6-85ed-3ae1caebaf64',
                    layers: [activeLayer.id],
                    visibleLayers: [activeLayer.id],
                    showXY: true,
                    identifyOnClick: true,
                    isEmbeddedToggle: false,
                    background: "0",
                    layersMode: 2,
                    zoomButtons:false,
                    onLoad: () => {
                        setTimeout(() => filter(), 2000);
                    }
                });
            }

        function filter() {
            const params = {
                layerName: activeLayer.id,
                whereClause: `${activeLayer.fieldName} LIKE '${activeLayer.layerNumber || 22}%'`,
                zoomToExtent: true
            };
            govmap.filterLayers(params);
        }

        function showAllFeatures() {
            const params = {
                layerName: activeLayer.id,
                whereClause: `1 = 1`,
                zoomToExtent: true
            };
            govmap.filterLayers(params);
        }
    </script>
</head>

<body>
    <div style="display: flex;">
        <div id="map" style="width:850px;height:750px"></div>
        <button onclick="showAllFeatures()" style="height: 50px;">הצג את כל הישויות בשכבה</button>
    </div>
</body>

</html>